var DAY_SUFFIX=".DAY";var MONTH_SUFFIX=".MONTH";var YEAR_SUFFIX=".YEAR";var HOURS_SUFFIX=".HOUROFDAY";var MINUTES_SUFFIX=".MINUTES";var SECONDS_SUFFIX=".SECONDS";var DATE_SUFFIX=".DATE";var TIME_SUFFIX=".TIME";function validateRegularExpression(e,i,a,h,l,g,b,k){var f=true;if(hasChanged(g,e)){if(!this["beforeValidation"]||this["beforeValidation"](e,getMsg(g,"ValidationMessage"),null,null,a,h,l,null,null,g,null,null,k)){if(!this["beforeValidateRegularExpression"]||beforeValidateRegularExpression(e,i,a,h,l,g,k)){if(e.value==null||e.value.length==0){if(b){hideErrorMessage(g,e,k)}updateStyles(g,e,k,"remove");return true}if(i!=""){var d=new RegExp(i);if(!d.test(e.value)){if(l[0]!=null&&l[0].length>0){alertComp(e,l[0],g,b,k)}else{alertComp(e,getMsg(g,"ValidationMessage"),g,b,k)}f=false}}if(f){if(b){hideErrorMessage(g,e,k)}updateStyles(g,e,k,"remove")}f=f?checkRange(e,trim(e.value).length,"Length",a,h,l,g,b,null,k):f}}if(this["afterValidateRegularExpression"]){f=afterValidateRegularExpression(e,i,a,h,l,g,f,k)}if(this["afterValidation"]){f=afterValidation(e,getMsg(g,"ValidationMessage"),null,null,a,h,l,null,null,g,null,null,f,k)}if(!f){if(g==null){g=""}var j=getVariable(g,"invalidQuestions");if(j==null){j=new Array()}j[e.id]=e;setVariable(g,"invalidQuestions",j)}else{if(g==null){g=""}var j=getVariable(g,"invalidQuestions");if(j!=null){delete j[e.id]}}}return f}function validFile(f,n,d,l,q,k,h,o){var j=false;var p=false;var a=f.value;if(!this["beforeValidation"]||this["beforeValidation"](c,getMsg(k,"InvalidUploadTypeMessage"),null,null,d,l,q,n,null,k,null,null,o)){if(!this["beforeValidFile"]||beforeValidFile(f,n,q,k)){if(a==null||a.length==0){enableSubmit(k,true);j=true}if(h){hideErrorMessage(k,f,o)}if(!j){var g="";var m=false;if(n!=null&&n.length>0&&!validateFileExtension(f,n)){var b="";for(var e=0;e<n.length;e++){b+=n[e]+" "}if(m){g=+"&nbsp;&nbsp;"}g+=getMsg(k,"InvalidUploadTypeMessage","QUESTION_CONSTRAINT="+b);m=true}if(l!=null&&l.length>0&&!validateFileSize(f,l)){if(m){g+="&nbsp;&nbsp;"}g+=getMsg(k,"InvalidMaxFileSizeMessage","QUESTION_CONSTRAINT="+l);m=true}if(m){if(q[0]!=null&&q[0].length>0){alertComp(f,q[0],k,h)}else{alertComp(f,g,k,h)}if(k==null){k=""}enableSubmit(k,false);j=false}else{if(k==null){k=""}enableSubmit(k,true);j=true}}}}if(this["afterValidFile"]){j=afterValidFile(f,n,q,k,j)}if(this["afterValidation"]){j=afterValidation(c,getMsg(k,"InvalidUploadTypeMessage"),null,null,d,l,q,n,null,k,null,null,j,o)}return j}function validateFileExtension(a,d){found=false;if(d==null){found=true}else{for(var b=0;b<d.length;b++){if((a.value.substr(a.value.lastIndexOf(".")+1,a.value.length).toLowerCase())==d[b].toLowerCase()){found=true}}}return found}function validateFileSize(b,a){if(window.FileReader){if(b.files&&b.files[0]){var d=b.files[0];if(d.size>(a*1024)){return false}}}return true}function validAlphaNumeric(b,d,a,g,e,h,f){return checkWithHook("ValidAlphaNumeric",b,"AN",getMsg(e,"InvalidAlphaNumericMessage"),null,null,d,a,g,null,null,e,h,null,null,f)}function validAlpha(b,d,a,g,e,h,f){return checkWithHook("ValidAlpha",b,"A",getMsg(e,"InvalidAlphaMessage"),null,null,d,a,g,null,null,e,h,null,null,f)}function validAllChars(b,d,a,g,e,h,f){return checkWithHook("ValidAllChars",b,"AC","",null,null,d,a,g,null,null,e,h,null,null,f)}function validNumeric(e,a,h,j,k,g,f,i){var d=checkWithHook("ValidNumeric",e,"N",getMsg(g,"InvalidNumMessage"),j,null,a,h,k,null,null,g,f,null,null,i);var b=e.value;if(d&&j&&j.length>0){b=removeNumberFormating(e.value,j,true);if(b!=null&&b.length>0){if(b.charAt(0)=="-"){b="-"+b.substr(1).replace(/^0+(?!$)/,"")}else{b=b.replace(/^0+(?!$)/,"")}e.value=addNumberFormating(b,j)}}return d}function validDouble(e,a,h,j,k,g,f,i){var d=checkWithHook("ValidDouble",e,"D",getMsg(g,"InvalidDecimalMessage"),j,null,a,h,k,null,null,g,f,null,null,i);var b=e.value;if(d&&j&&j.length>0){b=removeNumberFormating(e.value,j,true);if(b!=null&&b.length>0){if(b.charAt(0)=="-"){b="-"+b.substr(1).replace(/^0+(?!\.|$)/,"")}else{b=b.replace(/^0+(?!\.|$)/,"")}e.value=addNumberFormating(b,j)}}return d}function validDateTime(j,a,f,i,g,b,e,d,h){if(g==null){g=new Array("dd/mm/yyyy","hh:mm:ss")}if(b==null){b=new Array("/",":"," ")}return checkWithHook("ValidDateTime",j,"VDT",getMsg(e,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(g[0]+b[2]+g[1])),null,null,a,f,i,g,b,e,d,null,null,h)}function validDateWeekTime(j,a,f,i,g,b,e,d,h){if(g==null){g=new Array("ww/yyyy","hh:mm:ss")}if(b==null){b=new Array("/",":"," ")}return checkWithHook("ValidDateWeekTime",j,"VDWT",getMsg(e,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(g[0]+b[2]+g[1])),null,null,a,f,i,g,b,e,d,null,null,h)}function validDateWeek(j,a,f,i,g,b,e,d,h){if(g==null){g="ww/yyyy"}if(b==null){b="/"}return checkWithHook("ValidDateWeek",j,"VDW",getMsg(e,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(g)),null,null,a,f,i,g,b,e,d,null,null,h)}function validDate(j,a,f,i,g,b,e,d,h){if(g==null){g="dd/mm/yyyy"}if(b==null){b="/"}return checkWithHook("ValidDate",j,"VD",getMsg(e,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(g)),null,null,a,f,i,g,b,e,d,null,null,h)}function validTime(j,a,f,i,g,b,e,d,h){return checkWithHook("ValidTime",j,"VT",getMsg(e,"InvalidTimeMessage","QUESTION_CONSTRAINT="+g),null,null,a,f,i,g,b,e,d,null,null,h)}function validDayDatePart(b,d,h,e,l,a,f,o,m,g,k,j,n){var i=checkWithHook("ValidDayDatePart",b,"VDP",getMsg(k,"InvalidDateMessage","QUESTION_CONSTRAINT="+m),d,h,e,l,o,m,g,k,j,a,f,n);return validateOtherSplitParts(i,b.id)}function validMonthDatePart(h,f,g,b,l,a,d,o,m,e,k,j,n){var i=checkWithHook("ValidMonthDatePart",h,"VMP",getMsg(k,"InvalidDateMessage","QUESTION_CONSTRAINT="+m),f,g,b,l,o,m,e,k,j,a,d,n);return validateOtherSplitParts(i,h.id)}function validYearDatePart(n,b,g,d,k,a,e,o,l,f,j,i,m){var h=checkWithHook("ValidYearDatePart",n,"VYP",getMsg(j,"InvalidDateMessage","QUESTION_CONSTRAINT="+l),g,b,d,k,o,l,f,j,i,a,e,m);return validateOtherSplitParts(h,n.id)}function validHourTimePart(a,h,d,e,l,b,f,o,m,g,k,j,n){var i=checkWithHook("ValidHourTimePart",a,"VHT",getMsg(k,"InvalidTimeMessage","QUESTION_CONSTRAINT="+m),h,d,e,l,o,m,g,k,j,null,null,n);return validateOtherSplitParts(i,a.id)}function validMinuteTimePart(a,h,d,e,l,b,f,o,m,g,k,j,n){var i=checkWithHook("ValidMinuteTimePart",a,"VMT",getMsg(k,"InvalidTimeMessage","QUESTION_CONSTRAINT="+m),h,d,e,l,o,m,g,k,j,null,null,n);return validateOtherSplitParts(i,a.id)}function validSecondTimePart(b,h,g,d,l,a,e,o,m,f,k,j,n){var i=checkWithHook("ValidSecondTimePart",b,"VST",getMsg(k,"InvalidTimeMessage","QUESTION_CONSTRAINT="+m),h,g,d,l,o,m,f,k,j,null,null,n);return validateOtherSplitParts(i,b.id)}function validWeekDatePart(b,g,d,k,a,e,n,l,f,j,i,m){var h=checkWithHook("ValidWeekDatePart",b,"VWP",getMsg(j,"InvalidDateMessage","QUESTION_CONSTRAINT="+l),"",g,d,k,n,l,f,j,i,a,e,m);return true}function validateOtherSplitParts(d,b){if(!d||getTriggeredReason()==FORMAT_VALIDATION_TRIGGER){return d}var a=b.substring(b.lastIndexOf("."));var d=true;var e=b.substring(0,b.lastIndexOf("."));d=validPart(e,d,".DAY",a);d=validPart(e,d,".MONTH",a);d=validPart(e,d,".YEAR",a);d=validPart(e,d,".HOUROFDAY",a);d=validPart(e,d,".MINUTES",a);d=validPart(e,d,".SECONDS",a);return d}function validPart(b,f,e,a){var g=document.getElementById(b+e);if(f&&g&&a!=e){if(g.onchange){f=execute(g,"onchange",FORMAT_VALIDATION_TRIGGER)}else{f=execute(g,"onblur",FORMAT_VALIDATION_TRIGGER)}}return f}function checkWithHook(e,q,i,j,u,r,k,n,f,o,b,s,a,l,p,d){var h=true;if(!this["beforeValidation"]||this["beforeValidation"](q,j,u,r,k,n,f,o,b,s,l,p)){if(!this["before"+e]||this["before"+e](q,j,u,r,k,n,f,o,b,s,l,p)){h=checkA(q,i,j,u,r,k,n,f,o,b,s,a,l,p,d)}}if(this["after"+e]){h=this["after"+e](q,j,u,r,k,n,f,o,b,s,l,p,h)}if(this["afterValidation"]){h=this["afterValidation"](q,j,u,r,k,n,f,o,b,s,l,p,h)}if(!h){if(s==null){s=""}var g=getVariable(s,"invalidQuestions");if(g==null){g=new Array()}g[q.id]=q;setVariable(s,"invalidQuestions",g)}else{if(s==null){s=""}var g=getVariable(s,"invalidQuestions");if(g!=null){delete g[q.id]}}return h}function checkA(x,l,o,C,A,p,s,h,u,e,B,d,r,w,f){var j=true;var y=getElementValue(x,B);if(y==null||y==""){if(x.validity&&!x.validity.valid){j=false}else{var q=isFieldInMandError(B,x.id);if(!q){if(d){hideErrorMessage(B,x,f)}updateStyles(B,x,f,"remove")}return true}}if(j){var b=null;if(l=="N"||l=="D"){if(C&&C.length>0){y=removeNumberFormating(y,C,false)}}if(l=="A"){j=isAlpha(y)}else{if(l=="AN"){j=isAlphanumeric(y)}else{if(l=="AC"){j=true}else{if(l=="N"){j=isClientInteger(y)}else{if(l=="D"){var k=".";if(C&&C.length>0){k=""+C.charAt(0)}j=isClientDouble(y,k)}else{if(l=="VDP"){j=isDay(y)}else{if(l=="VMP"){j=isMonth(y)}else{if(l=="VWP"){j=isWeek(y)}else{if(l=="VYP"){j=isYear(y)}else{if(l=="VHT"){j=isHour(y)}else{if(l=="VMT"){j=isMinute(y)}else{if(l=="VST"){j=isSecond(y)}else{if(l=="VT"){j=isTime(y,u,e)}else{if(l=="VD"){var i=nDate(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}else{if(l=="VDT"){var i=nDateTime(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}else{if(l=="VDWT"){var i=nDateWeekTime(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}else{if(l=="VDW"){var i=nDateWeek(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}}}}}}}}}}}}}}}}}}if(!j){var n=0;if(l=="VHT"||l=="VMT"||l=="VST"||l=="VT"){n=5}var a=(h[n]&&h[n].length>0)?getMsg("@GOT_MSG@",h[n],"QUESTION_CONSTRAINT="+u):o;return alertComp(x,a,B,d,f)}else{if(getForm(B)){b=getForm(B).elements}if(d){hideErrorMessage(B,x,f)}updateStyles(B,x,f,"remove");if(l.charAt(0)=="A"){return checkRange(x,y.length,"Length",p,s,h,B,d,null,f)}else{if(l=="N"){if(p.indexOf("+")==0){p=p.substring(1)}if(s.indexOf("+")==0){s=s.substring(1)}return checkRange(x,mpi(y),"Value",p,s,h,B,d,C,f)}else{if(l=="D"){if(p.indexOf("+")==0){p=p.substring(1)}if(s.indexOf("+")==0){s=s.substring(1)}if(C&&C.length>0){y=removeNumberFormating(y,C,true)}return checkRange(x,mpd(y),"Value",p,s,h,B,d,C,f)}else{if(l=="VDP"){return validDateParts(x,x,b[x.name.substring(0,x.name.lastIndexOf("."))+C],b[x.name.substring(0,x.name.lastIndexOf("."))+A],p,s,r,w,u,e,B,d,h,f)}else{if(l=="VMP"){return validDateParts(x,b[x.name.substring(0,x.name.lastIndexOf("."))+C],x,b[x.name.substring(0,x.name.lastIndexOf("."))+A],p,s,r,w,u,e,B,d,h,f)}else{if(l=="VYP"){return validDateParts(x,b[x.name.substring(0,x.name.lastIndexOf("."))+C],b[x.name.substring(0,x.name.lastIndexOf("."))+A],x,p,s,r,w,u,e,B,d,h,f)}else{if(l=="VD"||l=="VDT"){var g=x.value;if(l=="VDT"){var z=g.indexOf(e[2]);if(z>-1){g=g.substring(0,z)}u=u[0];e=e[0]}if(!checkMinDate(x,g,p,u,e,B,d,r,h,f)){return false}if(!checkMaxDate(x,g,s,u,e,B,d,w,h,f)){return false}return true}else{if(l=="VDW"||l=="VDWT"){var g=x.value;if(l=="VDWT"){var z=g.indexOf(e[2]);if(z>-1){g=g.substring(0,z)}u=u[0];e=e[0]}if(!checkMinDateWeek(x,g,p,u,e,B,d,r,h,f)){return false}if(!checkMaxDateWeek(x,g,s,u,e,B,d,w,h,f)){return false}return true}}}}}}}}}return true}function trim(a){return a.replace(/^\s+|\s+$/g,"")}function isAlpha(d){var a;d=d.toUpperCase();for(var b=0;b<d.length;b++){a=d.charAt(b);if(!isLetter(a)&&!isSpecial(a)){return false}}return true}function isAlphanumeric(d){var a;d=d.toUpperCase();for(var b=0;b<d.length;b++){a=d.charAt(b);if(!isDigit(a)&&!isLetter(a)&&!isSpecial(a)){return false}}return true}function isClientInteger(b,a){return isInt(b,a)}function isInteger(a){return isInt(a,".,")}function isInt(d,a){if(d.length==0){return true}var e;if(a&&a.length>1){e=a.charAt(1)}for(var b=0;b<d.length;b++){if(b==0&&(d.charAt(b)=="-"||d.charAt(b)=="+")){if(d.length==1){return false}continue}if(!isDigit(d.charAt(b))){if(!(e&&e!=""&&(d.charAt(b)==e))){return false}}}return true}function isClientDouble(b,a){return isDbl(b,a)}function isDouble(a){return isDbl(a,".,")}function isDbl(e,b){if(e.length==0){return true}var a=".";if(b&&b.length>0){a=b.charAt(0)}var g;if(b&&b.length>1){g=b.charAt(1)}var f=0;for(var d=0;d<e.length;d++){if(d==0&&(e.charAt(d)=="-"||e.charAt(d)=="+")){if(e.length==1){return false}continue}if(!isDigit(e.charAt(d))){if(g&&g!=""&&(e.charAt(d)==g)){continue}else{if(a&&a!=""&&(e.charAt(d)==a)){f++}else{return false}}}}if(f>1){return false}return true}function isDigit(a){return((a>="0")&&(a<="9"))}function isLetter(a){return((a>="A")&&(a<="Z"))}function isSpecial(a){return(a==" "||a=="'")}function isTime(g,f,e){var d=splitstring(g,e,false,true);var b=splitstring(f,e,false,true);for(var a=0;a<b.length;a++){if(d[a]==""||isNaN(d[a])||parseInt(d[a])<0){return false}if(b[a]=="hh"){if(parseInt(d[a])>23){return false}}else{if(parseInt(d[a])>59){return false}}}return true}function addNumberFormating(i,d){var h=d.charAt(0);var a=d.charAt(1);var g=new Array();var f=i+"";if(f.length>0&&f.charAt(0)=="."){f="0"+f}g=splitstring(f,".",false,true);var e=d.charAt(1)=="Y";if(e){a=d.charAt(2);if(a&&a!=""){var b=new RegExp("(-?\\d+)(\\d{3})");while(b.test(g[0])){g[0]=g[0].replace(b,"$1"+a+"$2")}}}if(g[1]){return g[0]+h+g[1]}else{return g[0]}}function removeNumberFormating(m,o,k){if(m&&m!=""){var n=m;var f;var h=o.charAt(0);if(h&&h!=""){if(n.charAt(0)==h){n="0"+n}f=splitstring(n,h,false,true);if(f.length==1||f.length==2){n=f[0]}}var e=o.charAt(1)=="Y";if(e){var b=o.charAt(2);if(b&&b!=""){var j=o.charAt(3)=="Y";if(j){var d=0;if(n.charAt(0)=="-"){d=1}for(var g=n.length-4;g>d;g-=4){var a=n.charAt(g);if(a!=b&&!isDigit(a)){return m}else{if(a==b){n=n.substring(0,g)+n.substring(g+1)}else{g++}}}}else{var l=new RegExp(b,"g");if("[^$.|?*+()".indexOf(b)!=-1){l=new RegExp("\\"+b,"g")}n=n.replace(l,"")}}}m=n;if(h&&h!=""&&f.length==2){if(k){m=m+"."+f[1]}else{m=m+h+f[1]}}}return m}function checkRange(d,a,h,b,g,k,f,e,j,i){if(!checkMin(d,a,b,h,k,f,e,j,i)){return false}if(!checkMax(d,a,g,h,k,f,e,j,i)){return false}return true}function checkMax(b,a,h,i,l,g,f,k,j){if(h==""){return true}var e=""+a;var d=""+h;if(isInteger(e)&&isInteger(d)){e=mpi(e);d=mpi(d)}else{if(isDouble(e)&&isDouble(d)){e=mpd(e);d=mpd(d)}}if(e>d){if(l[2].length>0){alertComp(b,l[2],g,f,j)}else{if(k&&k.length>0){d=addNumberFormating(d,k)}alertComp(b,getMsg(g,"InvalidMax"+i+"Message","QUESTION_CONSTRAINT="+d),g,f,j)}return false}return true}function checkMin(d,a,b,i,l,h,g,k,j){if(b==""){return true}var f=""+a;var e=""+b;if(isInteger(f)&&isInteger(e)){f=mpi(f);e=mpi(e)}else{if(isDouble(f)&&isDouble(e)){f=mpd(f);e=mpd(e)}}if(f<e){if(l[1].length>0){alertComp(d,l[1],h,g,j)}else{if(k&&k.length>0){e=addNumberFormating(e,k)}alertComp(d,getMsg(h,"InvalidMin"+i+"Message","QUESTION_CONSTRAINT="+e),h,g,j)}return false}return true}function mpi(b,a){if(b==null&&a!=null){b=""+a}else{b=""+b}while(b!=null&&(b.charAt(0)=="0")&&(b.length>1)){b=b.substring(1)}return parseInt(b,10)}function mpd(a){a=""+a;while((a.charAt(0)=="0")&&(a.length>1)){a=a.substring(1)}return parseFloat(a)}function validDateParts(i,v,b,d,n,q,p,s,r,f,y,e,h,g){if((v!=null&&v.value=="")||(b!=null&&b.value=="")||(d!=null&&d.value=="")){return true}var l=(d==null?getCurrentYear(y):parseInt(d.value,10));var o=(b==null?1:mpi(b.value,1));var a=(v==null?1:mpi(v.value,1));if(a>daysInMonth[o]){return alertComp(v,(h[3]&&h[3].length>0)?h[3]:getMsg(y,"InvalidDaysInMonthMessage"),y,e,g)}else{if((o==2)&&(a>daysInFebruary(l))){return alertComp(d,(h[4]&&h[4].length>0)?h[4]:getMsg(y,"InvalidLeapYearMessage"),y,e,g)}}if(n==""&&q==""){return(true)}var j=a+"/"+o+"/"+l;var u="dd/mm/yyyy";var t="/";var w=splitstring(n,"/",false);var x=splitstring(q,"/",false);if(r.indexOf("dd")<0){w[0]="1";x[0]="1"}if(r.indexOf("mm")<0){w[1]="1";x[1]="1"}if(r.indexOf("yyyy")<0){w[2]=getCurrentYear(y);x[2]=getCurrentYear(y)}var k=w[0]+"/"+w[1]+"/"+w[2];var m=x[0]+"/"+x[1]+"/"+x[2];if(n!=""&&!checkMinDate(i,j,k,u,t,y,e,p,h,g)){return false}if(q!=""&&!checkMaxDate(i,j,m,u,t,y,e,s,h,g)){return false}return true}function getCurrentYear(a){return(getVariable(a,"CURRENT_YEAR"))}function nDateTime(f,h,g,e){if((f==null)||(f=="")){return null}var b=f.indexOf(g[2]);if(b>-1){var a=f.substring(0,b);var d=f.substring(b+1);a=nDate(a,h[0],g[0],e);if(a==null){return null}if(!isTime(d,h[1],g[1])){return null}return a+g[2]+d}else{return nDate(f,h[0],g[0],e)}}function nDateWeekTime(f,h,g,e){if((f==null)||(f=="")){return null}var b=f.indexOf(g[2]);if(b>-1){var a=f.substring(0,b);var d=f.substring(b+1);a=nDateWeek(a,h[0],g[0],e);if(a==null){return null}if(!isTime(d,h[1],g[1])){return null}return a+g[2]+d}else{return nDateWeek(f,h[0],g[0],e)}}function nDate(e,h,g,b){if((e==null)||(e=="")){return null}var f=splitstring(stripTrailingChars(e,g),g,false,true);var a=splitstring(stripTrailingChars(h,g),g,false);if(f.length!=a.length){return null}this.dd="1";this.mm="1";this.yy=getCurrentYear(b);var d=null;if(a.length>0){if(a[0]=="dd"){if(isNaN(f[0])){return null}else{this.dd=mpi(f[0])}}else{if(a[0]=="mm"){if(isNaN(f[0])){return null}else{this.mm=mpi(f[0])}}else{if(a[0]=="yyyy"){if(isNaN(f[0])){return null}else{this.yy=mpi(f[0])}}}}d="";if(f[0].length==1){d="0"}d+=f[0]}if(a.length>1){if(a[1]=="dd"){if(isNaN(f[1])){return null}else{this.dd=mpi(f[1])}}else{if(a[1]=="mm"){if(isNaN(f[1])){return null}else{this.mm=mpi(f[1])}}else{if(a[1]=="yyyy"){if(isNaN(f[1])){return null}else{this.yy=mpi(f[1])}}}}d+=g;if(f[1].length==1){d+="0"}d+=f[1]}if(a.length>2){if(a[2]=="dd"){if(isNaN(f[2])){return null}else{this.dd=mpi(f[2])}}else{if(a[2]=="mm"){if(isNaN(f[2])){return null}else{this.mm=mpi(f[2])}}else{if(a[2]=="yyyy"){if(isNaN(f[2])){return null}else{this.yy=mpi(f[2])}}}}d+=g;if(a[2].length==1){d+="0"}d+=f[2]}if(isDate(""+this.yy,""+this.mm,""+this.dd)){return d}else{return null}}function nDateWeek(e,h,g,b){if((e==null)||(e=="")){return null}var f=splitstring(stripTrailingChars(e,g),g,false,true);var a=splitstring(stripTrailingChars(h,g),g,false);if(f.length!=a.length){return null}this.ww=1;this.yy=getCurrentYear(b);var d=null;if(a.length>0){if(a[0]=="ww"){if(isNaN(f[0])){return null}else{this.ww=mpi(f[0])}}else{if(a[0]=="yyyy"){if(isNaN(f[0])){return null}else{this.yy=mpi(f[0])}}}d="";if(f[0].length==1){d="0"}d+=f[0]}if(a.length>1){if(a[1]=="ww"){if(isNaN(f[1])){return null}else{this.ww=mpi(f[1])}}else{if(a[1]=="yyyy"){if(isNaN(f[1])){return null}else{this.yy=mpi(f[1])}}}d+=g;if(f[1].length==1){d+="0"}d+=f[1]}if(isWeek(this.ww)&&isYear(""+this.yy)){return d}else{return null}}function setFocus(f){if(f){try{if(document.querySelectorAll){var d=f.id+"_editor";var a=document.querySelectorAll("."+d);if(a.length>0){f=a[0]}}if(f.type&&f.type=="text"){f.select()}f.focus();setTimeout(function(){try{f.focus()}catch(g){}},100)}catch(b){}}return false}function isDate(b,f,a){if(!(isYear(b)&&isMonth(f)&&isDay(a))){return false}var d=parseInt(b,10);var e=mpi(f);var g=mpi(a);if(g>daysInMonth[e]){return false}if((e==2)&&(g>daysInFebruary(d))){return false}return true}function checkMaxDate(f,b,i,k,n,h,g,e,m,l){var a=true;if(i==""){return a}var d=new nDate(b,k,n,h);var j=new nDate(i,k,n,h);if(d.yy>j.yy){a=false}if(d.yy==j.yy){if((d.mm>j.mm)||((d.mm==j.mm)&&(d.dd>j.dd))){a=false}}if(!a){return alertComp(f,(m[2]&&m[2].length>0)?m[2]:getMsg(h,"InvalidMaxDateMessage","QUESTION_CONSTRAINT="+((e==null)?i:e)),h,g,l)}return true}function checkMinDate(g,d,f,j,n,i,h,a,m,l){var b=true;if(f==""){return true}var e=new nDate(d,j,n,i);var k=new nDate(f,j,n,i);if(e.yy<k.yy){b=false}if(e.yy==k.yy){if((e.mm<k.mm)||((e.mm==k.mm)&&(e.dd<k.dd))){b=false}}if(!b){return alertComp(g,(m[1]&&m[1].length>0)?m[1]:getMsg(i,"InvalidMinDateMessage","QUESTION_CONSTRAINT="+((a==null)?f:a)),i,h,l)}return true}function checkMaxDateWeek(f,b,i,k,n,h,g,e,m,l){var a=true;if(i==""){return a}var d=new nDateWeek(b,k,n,h);var j=new nDateWeek(i,k,n,h);if(d.yy>j.yy){a=false}if(d.yy==j.yy){if(d.ww>j.ww){a=false}}if(!a){return alertComp(f,(m[2]&&m[2].length>0)?m[2]:getMsg(h,"InvalidMaxDateMessage","QUESTION_CONSTRAINT="+((e==null)?i:e)),h,g,l)}return true}function checkMinDateWeek(g,d,f,j,n,i,h,a,m,l){var b=true;if(f==""){return true}var e=new nDateWeek(d,j,n,i);var k=new nDateWeek(f,j,n,i);if(e.yy<k.yy){b=false}if(e.yy==k.yy){if(e.ww<k.ww){b=false}}if(!b){return alertComp(g,(m[1]&&m[1].length>0)?m[1]:getMsg(i,"InvalidMinDateMessage","QUESTION_CONSTRAINT="+((a==null)?f:a)),i,h,l)}return true}function isIntegerInRange(f,e,d){if(!isInteger(f)){return false}return intbounds(mpi(f),e,d)}function intbounds(a,b,d){return((a>=b)&&(a<=d))}function isYear(a){return((isInteger(a))&&(a.length==4))}function isWeek(a){return(isIntegerInRange(a,1,53))}function isMonth(a){return(isIntegerInRange(a,1,12))}function isDay(a){return(isIntegerInRange(a,1,31))}function isHour(a){return(isIntegerInRange(a,0,23))}function isMinute(a){return(isIntegerInRange(a,0,59))}function isSecond(a){return(isIntegerInRange(a,0,59))}function daysInFebruary(a){if(isNaN(a)){return 29}return(((a%4==0)&&((!(a%100==0))||(a%400==0)))?29:28)}function stripTrailingChars(b,d){var a=b.length-1;while(a>=0){if(d.indexOf(b.charAt(a))!=-1){b=b.substring(0,a--)}else{a=-1}}return b}function alertMandMessage(e,b,d){var a=getMandMessage(b,e);if(a=="Mandatory"){a=getMsg(b,"MandMessage","QUESTION_CONSTRAINT="+getVariable(b,"MANDCHAR"))}else{a=substituteVariable(a,"QUESTION_CONSTRAINT="+getVariable(b,"MANDCHAR"))}ok=alertComp(e,a,b,d)}function getTListContainerDiv(a){return getParentNode(a.parentNode,"DIV")}function showErrorMessage(f,d,a,h){var e=getErrorMessageId(f,d);var i=document.getElementById(e);if(i){jscss("remove",i,"qlrError");i.innerHTML=a;showElem(i,true)}var b=getErrorMessageRowId(f,d);var g=document.getElementById(b);if(i){showElem(g,true)}}function getMandMessageId(b,a){var e=getLookupId(b,a);var f=e[0]+"MM_"+e[1]+e[2];var d=document.getElementById(f);if(d==null){e=getLookupId(b,a,true)}return e[0]+"MM_"+e[1]+e[2]}function getMandMessage(d,b){var a="";var f=getMandMessageId(d,b);var e=document.getElementById(f);if(e!=null&&e.innerHTML!=null){a=e.innerHTML}return a}function mandCheckRow(b,h,f,j,d){if(h==null){h=""}var i=true;var a=null;var k=document.getElementById(h+b);var g=getMsg(h,"MandMessage","QUESTION_CONSTRAINT="+getVariable(h,"MANDCHAR"));if(!this["beforeMandCheckRow"]||this["beforeMandCheckRow"](k,g,h)){var e=getFormElems(h,h+b);a=checkMandFields(e,h,f,j,d)}if(a!=null){i=alertMandMessage(a,h,j);setFocus(a)}if(this["afterMandCheckRow"]){i=this["afterMandCheckRow"](k,g,h,i)}return i}function mandCheckElems(f,i,d,k,b){if(i==null){i=""}var j=true;var a=null;var g=getMsg(i,"MandMessage","QUESTION_CONSTRAINT="+getVariable(i,"MANDCHAR"));if(!this["beforeMandCheckElems"]||this["beforeMandCheckElems"](f,i,d,g)){a=checkMandFields(f,i,d,k,b)}if(a!=null){j=alertMandMessage(a,i,k);try{setFocus(a)}catch(h){}}if(this["afterMandCheckElems"]){j=this["afterMandCheckElems"](f,i,d,g,j,a)}return(j)}function isFieldInMandError(b,e){var d=getVariable(b,"MAND_ERRORS");if(d){for(var a=0;a<d.length;a++){if(d[a]==e){return true}}}return false}function arraycontains(b,e){var d=b.length;while(d--){if(b[d]===e){return true}}return false}function checkMandFields(formEls,ns,p_butAction,inlineErrors,validateAllFields){setVariable(ns,"MAND_ERRORS",null);var tmpMandErrorList=new Array();var mandErrorsList=new Array();var mandComp=null;var compID=(p_butAction)?getCompID(ns,p_butAction):null;for(var i=0;i<formEls.length;i++){var tmp=formEls[i];if(!tmp.disabled&&tmp.type!="hidden"&&tmp.id.indexOf(UNSELECT_LIST_PREFIX)==-1){if(!validateAllFields&&tmp.name!=null&&tmp.name==p_butAction){break}if(compID!=null&&tmp.id!=null&&tmp.id.indexOf(compID)!=0){continue}var val=""+getElementValue(tmp,ns);var s=(IE4||tmp.type=="textarea"||tmp.type=="text"||tmp.type=="select-one"||tmp.type=="select-multiple")?tmp.style:tmp.parentNode.style;var mandMessage=getMandMessage(ns,tmp);if(mandMessage.length>0){if(trim(val)==""){showMessage=true;var lookupIdArr=getLookupId(ns,tmp);var lid=lookupIdArr[0]+lookupIdArr[1]+lookupIdArr[2];if(!arraycontains(tmpMandErrorList,lid)){mandErrorsList.push(tmp.id);tmpMandErrorList.push(lid)}var styleArray=extractStyleArray(tmp);if(styleArray!=null){updateStyles(ns,tmp,styleArray,"add")}var oc;if(tmp.onchange){oc=""+tmp.onchange}else{if(tmp.type=="radio"||tmp.type=="checkbox"&&tmp.onclick){oc=""+tmp.onclick}else{if(tmp.type=="radio"||tmp.type=="checkbox"){oc=""+tmp.parentNode.parentNode.onclick}else{if(tmp.onblur){oc=""+tmp.onblur}}}}if(oc){var styles=(oc.lastIndexOf(" ['")>0&&oc.lastIndexOf("']")>0)?oc.substring(oc.lastIndexOf(" ['")+1,oc.lastIndexOf("']")+2):oc.substring(oc.lastIndexOf(' ["')+1,oc.lastIndexOf('"]')+2);try{var styleArray=eval(styles);updateStyles(ns,tmp,styleArray,"add")}catch(e){}}if(mandComp==null){mandComp=tmp}if(inlineErrors){alertMandMessage(tmp,ns,inlineErrors)}}else{if(tmp.id.indexOf(SELECT_LIST_PREFIX)>-1){var id=tmp.id.substring(tmp.id.indexOf(SELECT_LIST_PREFIX)+SELECT_LIST_PREFIX.length);var comp=document.getElementById(ns+UNSELECT_LIST_PREFIX+id);if(comp!=null){s=comp.style}}setMandStyle(tmp,s,false)}}}}if(mandComp==null){mandErrorsList=null}setVariable(ns,"MAND_ERRORS",mandErrorsList);return mandComp}function formatCheckElems(d,h,l){if(h==null){h=""}var k=getVariable(h,"focusValue");setVariable(h,"focusValue","");var j=true;var g=true;var e;var f=new Array();for(var b=0;b<d.length;b++){e=d[b];if(e.type!=null){if(!e.disabled&&e.type!="hidden"&&e.id.indexOf(UNSELECT_LIST_PREFIX)==-1){accumulateDateTimeElems(e,f,h);var a=true;if(e.onchange!=null&&((""+e.onchange).indexOf("ajax")<0||(""+e.onchange).indexOf("ajaxQuestionAction")>0||(""+e.onchange).indexOf("ajaxSubList")>0||(e.onblur!=null&&(""+e.onblur).indexOf("ec_suggest")>0))&&(e.type.indexOf("select")!=0||isDatePartElem(e))){a=execute(e,"onchange",FORMAT_VALIDATION_TRIGGER)}else{if(e.onblur!=null&&((""+e.onblur).indexOf("ajax")<0||(""+e.onblur).indexOf("ajaxQuestionAction")>0||(""+e.onblur).indexOf("ajaxSubList")>0)&&(e.type.indexOf("select")!=0||isDatePartElem(e))){a=execute(e,"onblur",FORMAT_VALIDATION_TRIGGER)}}if(a!=null&&a==false){j=false;setFocus(e);break}}}}g=validateDateTimeElems(f,h,l);if(this["afterFormatCheckElems"]){this["afterFormatCheckElems"](e,h,j,g)}setVariable(h,"focusValue",k);setVariable(h,"FORMAT_ERRORS",(j&&g)?null:e);return(j&&g)}function alertComp(b,a,e,i,f){if(!i){i=false}var d=false;if(e==null){e=""}if(!this["beforeMessageAlert"]||beforeMessageAlert(b,a,e)){updateStyles(e,b,f,"add");if(i){showErrorMessage(e,b,a,f)}else{alert(a)}}if(b!=null){var h=getVariable(e,"MAND_ERRORS");var g=getVariable(e,"FORMAT_ERRORS");if(h||g){showTab(b,e)}if(!i){setFocus(b)}}if(this["afterMessageAlert"]){d=afterMessageAlert(b,a,e,d)}return(d)}function isDatePartElem(a){if(a!=null){return(isDatePartFunctionName(a.name))}return(false)}function accumulateDateTimeElems(b,a,d){if(isDatePartElem(b)){a[b.name]=b}}function validateDateTimeElems(f,l,j){var m=new Array();for(var k in f){if(typeof(f[k])=="object"){var e=f[k];var b=k.substring(0,k.lastIndexOf("."));if(m[b]){continue}var d=""+getElementValue(e,l);if(trim(d)==""){continue}m[b]=true;for(var h=0;h<DATE_TIME_PARTS.length;h++){var a=b+"."+DATE_TIME_PARTS[h];if(a!=k){var g=f[a];if(g){d=""+getElementValue(g,l);if(trim(d)==""){return alertComp(g,getMsg(l,"ValidationMessage"),l,j)}}}}}}return(true)};