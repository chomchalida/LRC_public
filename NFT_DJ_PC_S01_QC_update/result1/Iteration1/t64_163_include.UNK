var whoson_global={layout:"standard",color:"red",server:"https://hastingschat.whoson.com/newchat/",position:"bottom-right",height:"540",width:"430",mode:"inline",mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),imagemode:"image",onlineText:"Click To Chat",offlineText:"Leave A Message",onlineChatwindowTitle:"WhosOn Live Chat",offlineChatwindowTitle:"Contact Us",poweredBy:"Powered By",offlineBehaviour:"hidden",onlineImageURL:"https://hastingsdirect.whoson.com/siteimage.htm?d=qa.hastings.com&imagetype=6",offlineImageURL:"https://hastingsdirect.whoson.com/siteimage.htm?d=qa.hastings.com&imagetype=7",protocol:window.location.protocol,onlineimage:window.location.protocol+"//hastingsdirect.whoson.com/stat.gif?domain=qa.hastings.com",offlineimage:window.location.protocol+"//hastingsdirect.whoson.com/stat.gif?domain=qa.hastings.com",templates:{},domain:"qa.hastings.com",department:null,language:null,session:null,debugOptions:{enabled:!1,depth:!1,timing:!1,safeScript:!0},debugLog:function(e,o){var n=whoson_global.debugOptions;!0===n.enabled&&console.log("%c"+(n.timing?" "+Date.now()+" ":"")+"WhosOn Chat: "+e,"background:#f3f3f3;color:#6971e9;"),!0===n.depth&&n.depth&&console.log("%c "+depth,"color:#67BC9A;")},applicationLink:"{applicationLink}",applicationTitle:"{applicationTitle}",checkStatus:null,customParameters:{},checkStatus:null,jq:null,iterations:0,statusPage:window.location.protocol+"//hastingsdirect.whoson.com/w.js?domain=qa.hastings.com&callback=whoson_global.checkStatus",invites:!0,dfd:null,online:null,hidden:!1,applicationLink:"https://www.whoson.com",applicationTitle:"WhosOn"};function whoson_init(r){-1<r.offlineChatwindowTitle.indexOf("{")&&(r.offlineChatwindowTitle="WhosOn Live Chat"),-1<r.poweredBy.indexOf("{")&&(r.poweredBy="Powered By"),r.mobile&&(r.onlineImageURL="https://hastingsdirect.whoson.com/siteimage.htm?d=qa.hastings.com&imagetype=11",r.offlineImageURL="https://hastingsdirect.whoson.com/siteimage.htm?d=qa.hastings.com&imagetype=12");var e=new Date,o=document.cookie.toString();if(-1===o.indexOf("whoson"))r.session=parseInt(1e3*Math.random())+"-"+e.getTime(),document.cookie="whoson="+r.session+";expires="+new Date((new Date).getTime()+3154e7).toUTCString()+"; path=/";else{var n=o.indexOf("whoson=")+"whoson=".length,i=o.indexOf(";",n);-1===i&&(i=o.length),r.session=o.substring(n,i)}function t(){d(r.server+"vendor/jquery/jquery-3.5.1.min.js",!1,function(){r.jq=jQuery.noConflict(!0),l()})}function a(){d(r.statusPage+"&x=1",!0)}function l(){r.dfd=new r.jq.Deferred,d(r.server+"js/whoson.inline.min.js",!1,function(){inlineChat(whoson_global),function(){var e=window.location.hostname===whoson_global.domain?window.location.pathname+window.location.search:window.location.href,o={u:r.session,p:e,r:document.referrer};r.jq.extend(o,r.customParameters),r.statusPage=r.statusPage+"&"+r.jq.param(o),d(r.statusPage,!1),r.invites&&d(r.statusPage.replace("w.js","invite.js"),!0,function(){"function"==typeof woAfterLoad&&(woAfterLoad(),woAfterLoad=function(){})}),a(),setInterval(a,3e4)}()})}function d(e,o,n){if(o&&r.jq("#whoson_poll").remove(),r.jq&&!r.debugOptions.safeScript)r.jq.getScript(e).done(function(){"function"==typeof n&&n()});else{var i=document.createElement("script");i.src=e,o&&(i.id="whoson_poll");var t=document.getElementsByTagName("head")[0],a=!1;i.onload=i.onreadystatechange=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,"function"==typeof n&&n(),i.onload=i.onreadystatechange=null)},t.appendChild(i)}}
return"function"==typeof $&&"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&"string"==typeof jQuery.fn.jquery?jQuery.fn.jquery.split(".").map(function(e){return("0"+e).slice(-2)}).join(".")<"01.11.03"?t():(r.debugLog("jQuery version OK!"),r.jq=jQuery,l()):(r.debugLog("no jQuery"),t()),r.checkStatus=function(e){var o=0!==e.online;o!==whoson_global.online&&(whoson_global.online=o,function e(){var o=!1,n=!1;if(r.debugLog("Status Changed"),r.jq("body").wochat(),r.on=0<r.jq(".wo-inline").length,(r.jq("#wo_chat_arrow").is(":visible")||r.jq("#wo_chat_header").is(":visible"))&&(o=!0),sessionStorage.getItem("activeChat")&&(n="true"===sessionStorage.getItem("activeChat")),0==r.hidden||!0===n){if(!r.online&&!0!==n||("image"===r.imagemode&&(r.jq("#wo_offline_image").hide(),r.jqbuttonHeight=r.jq("#wo_online_image").height()+4),"text"===r.imagemode&&(r.jq("#wo_offline").hide(),r.jqbuttonHeight=r.jq("#wo_online").height()+4),!1===o&&(r.debugLog("Set online"),r.jq("body").data("wochat").online())),!1===r.online&&!1===n&&("image"===r.imagemode&&(r.jq("#wo_online_image").hide(),r.debugLog("Hide Online Image")),"text"===r.imagemode&&r.jq("#wo_online").hide(),"form"===r.offlineBehaviour&&!1===o&&(r.debugLog("Set offline form"),r.jq("body").data("wochat").offline()),"hidden"===r.offlineBehaviour&&!1===o&&(r.debugLog("Set offline hidden"),r.jq("#wo_offImage").hide())),r.mobile){var i=document.querySelector("#wo_online_image"),t=document.querySelector("#wo_offline_image");if(null==i||null==t)return void setTimeout(function(){e()},1e3);i.classList.add("mobile-image"),t.classList.add("mobile-image");var a=document.querySelector("meta[name='viewport']"),l=document.querySelector(".mobile-image #wo_onImage"),d=document.querySelector(".mobile-image #wo_offImage");a?(l.style.height="6.5em",d.style.height="6.5em"):(l.style.height="15.5em",d.style.height="15.5em")}}else r.hidden&&(r.jq("#wo_offline_image").hide(),r.jq("#wo_online_image").hide(),r.jq("#wo_offline").hide(),r.jq("#wo_online").hide())}())},r.getChatWindow=function(){return r.jq("body").data("wochat")},!0}function sWOAddVariable(e,o){document.getElementById("wo_chatholder_wo")?(whoson_global.customParameters[e]=o,whoson_global.getChatWindow().resetChatUrl()):whoson_global.customParameters[e]=o}var sWOTrackPage=function(e){return 0<=window.location.search.indexOf("whosondebug")&&(whoson_global.debugOptions={enabled:!0,depth:!1,timing:!0,safeScript:!0}),"object"==typeof e&&(whoson_global.customParameters=e),whoson_init(whoson_global)};
